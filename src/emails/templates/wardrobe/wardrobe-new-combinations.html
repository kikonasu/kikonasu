<!--
  TRIGGER: wardrobe_new_combinations
  WHEN: 3 days after uploading a new item
  FREQUENCY: Once per new item
  SUBJECT: "{{newCombinations}} new outfit ideas with your {{itemCategory}}"
  PREVIEW: "Your new {{itemDescription}} works great with these pieces"
-->

<!-- New Combinations Banner -->
<tr>
  <td style="background: linear-gradient(135deg, #10b981 0%, #34d399 50%, #6ee7b7 100%); padding: 24px; text-align: center;">
    <p style="font-size: 36px; margin: 0 0 8px 0;">&#10024;</p>
    <p style="font-size: 20px; font-weight: 600; color: #ffffff; margin: 0;">
      New Outfit Possibilities!
    </p>
  </td>
</tr>

<!-- Main Content -->
<tr>
  <td class="content-section" style="padding: 32px 24px;">

    <!-- Greeting -->
    <h1 class="greeting" style="font-size: 24px; font-weight: 600; color: #1a1a1a; margin: 0 0 16px 0;">
      Great addition, {{userName}}!
    </h1>

    <p class="body-text" style="font-size: 16px; line-height: 1.6; color: #4a4a4a; margin: 0 0 24px 0;">
      Your new <strong>{{itemCategory}}</strong> has unlocked <strong>{{newCombinations}} new outfit combinations</strong> with your existing wardrobe!
    </p>

    <!-- New Item Showcase -->
    <div style="background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); border-radius: 16px; padding: 24px; margin: 0 0 24px 0; text-align: center;">
      <p style="font-size: 12px; font-weight: 600; color: #059669; text-transform: uppercase; letter-spacing: 0.5px; margin: 0 0 12px 0;">
        Your New Item
      </p>
      <img src="{{newItem.imageUrl}}" alt="{{newItem.category}}" style="width: 100%; max-width: 180px; height: auto; border-radius: 12px; margin-bottom: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
      <p style="font-size: 16px; font-weight: 500; color: #1a1a1a; margin: 0;">{{newItem.description}}</p>
      <p style="font-size: 14px; color: #6b7280; margin: 4px 0 0 0;">{{newItem.category}}</p>
    </div>

    <!-- Outfit Possibilities -->
    <p style="font-size: 14px; font-weight: 600; color: #374151; text-transform: uppercase; letter-spacing: 0.5px; margin: 0 0 16px 0;">
      Top Outfit Combinations
    </p>

    {{#each suggestedOutfits}}
    <div style="background-color: #f9fafb; border-radius: 12px; padding: 16px; margin: 0 0 16px 0;">
      <table role="presentation" style="width: 100%; border: none; border-spacing: 0;">
        <tr>
          {{#each this.items}}
          <td style="width: {{../columnWidth}}%; padding: 4px; text-align: center; vertical-align: top;">
            <img src="{{this.imageUrl}}" alt="{{this.category}}" style="width: 100%; max-width: 80px; height: auto; border-radius: 8px; {{#if this.isNew}}border: 3px solid #10b981;{{/if}}">
            <p style="font-size: 10px; color: #6b7280; margin: 4px 0 0 0; text-transform: uppercase;">{{this.category}}</p>
          </td>
          {{/each}}
        </tr>
      </table>
      {{#if this.occasion}}
      <p style="font-size: 13px; color: #6b7280; margin: 12px 0 0 0; text-align: center;">
        Perfect for: {{this.occasion}}
      </p>
      {{/if}}
    </div>
    {{/each}}

    <!-- Stats Box -->
    <div class="highlight-box" style="background-color: #f0fdf4; border-radius: 12px; padding: 16px 20px; margin: 0 0 24px 0; border-left: 4px solid #22c55e;">
      <table role="presentation" style="width: 100%; border: none; border-spacing: 0;">
        <tr>
          <td style="width: 50%; text-align: center; padding: 8px; border-right: 1px solid #bbf7d0;">
            <p style="font-size: 28px; font-weight: 700; color: #16a34a; margin: 0;">{{newCombinations}}</p>
            <p style="font-size: 12px; color: #15803d; margin: 4px 0 0 0;">New Combinations</p>
          </td>
          <td style="width: 50%; text-align: center; padding: 8px;">
            <p style="font-size: 28px; font-weight: 700; color: #16a34a; margin: 0;">{{matchingItems}}</p>
            <p style="font-size: 12px; color: #15803d; margin: 4px 0 0 0;">Matching Items</p>
          </td>
        </tr>
      </table>
    </div>

    <!-- Best Pairings -->
    {{#if bestPairings}}
    <p style="font-size: 14px; font-weight: 600; color: #374151; margin: 0 0 12px 0;">
      Items that pair best with your new {{itemCategory}}:
    </p>
    <table role="presentation" style="width: 100%; border: none; border-spacing: 0; margin: 0 0 24px 0;">
      <tr>
        {{#each bestPairings}}
        <td style="width: 25%; padding: 8px; text-align: center; vertical-align: top;">
          <img src="{{this.imageUrl}}" alt="{{this.category}}" style="width: 100%; max-width: 70px; height: auto; border-radius: 8px;">
          <p style="font-size: 11px; color: #6b7280; margin: 4px 0 0 0;">{{this.category}}</p>
        </td>
        {{/each}}
      </tr>
    </table>
    {{/if}}

    <!-- CTA -->
    <table role="presentation" style="width: 100%; border: none; border-spacing: 0;">
      <tr>
        <td align="center" style="padding: 8px 0;">
          <a href="{{appUrl}}/outfit?include={{newItem.id}}" class="cta-button" style="display: inline-block; background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%); color: #ffffff; font-size: 16px; font-weight: 600; padding: 16px 32px; border-radius: 12px; text-decoration: none;">
            Generate Outfits with This Item
          </a>
        </td>
      </tr>
      <tr>
        <td align="center" style="padding: 8px 0;">
          <a href="{{appUrl}}/wardrobe" class="secondary-button" style="display: inline-block; background-color: #f3f4f6; color: #4b5563; font-size: 14px; font-weight: 500; padding: 12px 24px; border-radius: 8px; text-decoration: none;">
            View My Wardrobe
          </a>
        </td>
      </tr>
    </table>

  </td>
</tr>
