<!--
  TRIGGER: week_start_planning
  WHEN: Sunday 6pm or Monday 6am (user preference)
  FREQUENCY: Weekly
  SUBJECT: "Plan your week: {{weekDateRange}}"
  PREVIEW: "{{weatherSummary}} - let's pick your outfits"
-->

<!-- Week Start Banner -->
<tr>
  <td style="background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 50%, #14b8a6 100%); padding: 24px;">
    <table role="presentation" style="width: 100%; border: none; border-spacing: 0;">
      <tr>
        <td style="text-align: center;">
          <p style="font-size: 14px; font-weight: 500; color: rgba(255,255,255,0.8); text-transform: uppercase; letter-spacing: 1px; margin: 0;">
            Week of
          </p>
          <p style="font-size: 28px; font-weight: 700; color: #ffffff; margin: 8px 0 0 0;">
            {{weekDateRange}}
          </p>
        </td>
      </tr>
    </table>
  </td>
</tr>

<!-- Main Content -->
<tr>
  <td class="content-section" style="padding: 32px 24px;">

    <!-- Greeting -->
    <h1 class="greeting" style="font-size: 24px; font-weight: 600; color: #1a1a1a; margin: 0 0 16px 0;">
      Ready for a stylish week, {{userName}}?
    </h1>

    <p class="body-text" style="font-size: 16px; line-height: 1.6; color: #4a4a4a; margin: 0 0 24px 0;">
      A few minutes of planning now means stress-free mornings all week. Here's what the weather looks like so you can plan ahead.
    </p>

    <!-- Weekly Weather Forecast -->
    <p style="font-size: 14px; font-weight: 600; color: #374151; text-transform: uppercase; letter-spacing: 0.5px; margin: 0 0 16px 0;">
      This Week's Weather
    </p>

    <table role="presentation" style="width: 100%; border: none; border-spacing: 0; margin: 0 0 24px 0;">
      {{#each weekForecast}}
      <tr>
        <td style="padding: 12px 0; border-bottom: 1px solid #f3f4f6;">
          <table role="presentation" style="width: 100%; border: none; border-spacing: 0;">
            <tr>
              <td style="width: 70px;">
                <p style="font-size: 14px; font-weight: 600; color: #374151; margin: 0;">{{this.dayName}}</p>
                <p style="font-size: 12px; color: #9ca3af; margin: 2px 0 0 0;">{{this.date}}</p>
              </td>
              <td style="width: 50px; text-align: center;">
                <span style="font-size: 28px;">{{this.icon}}</span>
              </td>
              <td style="text-align: center;">
                <p style="font-size: 16px; font-weight: 600; color: #1a1a1a; margin: 0;">{{this.high}}°</p>
                <p style="font-size: 14px; color: #9ca3af; margin: 0;">{{this.low}}°</p>
              </td>
              <td style="text-align: right;">
                <p style="font-size: 13px; color: #6b7280; margin: 0;">{{this.condition}}</p>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      {{/each}}
    </table>

    <!-- Weather Summary -->
    <div class="highlight-box" style="background: linear-gradient(135deg, #ecfeff 0%, #cffafe 100%); border-radius: 12px; padding: 16px 20px; margin: 0 0 24px 0; border-left: 4px solid #06b6d4;">
      <p style="font-size: 14px; font-weight: 600; color: #0e7490; margin: 0 0 4px 0;">
        Weather Tip
      </p>
      <p style="font-size: 15px; color: #155e75; margin: 0;">
        {{weatherTip}}
      </p>
    </div>

    <!-- Quick Stats -->
    {{#if hasLocalPlan}}
    <div style="background-color: #f9fafb; border-radius: 12px; padding: 16px 20px; margin: 0 0 24px 0;">
      <p style="font-size: 14px; color: #6b7280; margin: 0;">
        You have a <strong>local plan</strong> for this week with <strong>{{plannedDays}} days</strong> already planned.
      </p>
      <p style="font-size: 14px; color: #8B5CF6; margin: 8px 0 0 0;">
        <a href="{{appUrl}}/suitcase/{{localPlanId}}" style="color: #8B5CF6; text-decoration: none;">View your plan &#8594;</a>
      </p>
    </div>
    {{/if}}

    <!-- Suggested Actions -->
    <p style="font-size: 16px; font-weight: 600; color: #1a1a1a; margin: 0 0 16px 0;">
      Suggested actions:
    </p>

    <table role="presentation" style="width: 100%; border: none; border-spacing: 0; margin: 0 0 24px 0;">
      <tr>
        <td style="padding: 12px 16px; background-color: #f9fafb; border-radius: 8px;">
          <table role="presentation" style="width: 100%; border: none; border-spacing: 0;">
            <tr>
              <td style="width: 32px; vertical-align: top; padding-top: 2px;">
                <span style="font-size: 18px;">&#128197;</span>
              </td>
              <td>
                <p style="font-size: 15px; color: #374151; margin: 0; font-weight: 500;">Create a weekly outfit plan</p>
                <p style="font-size: 13px; color: #6b7280; margin: 4px 0 0 0;">Plan outfits for work days, weekend plans, or special events</p>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr><td style="height: 8px;"></td></tr>
      <tr>
        <td style="padding: 12px 16px; background-color: #f9fafb; border-radius: 8px;">
          <table role="presentation" style="width: 100%; border: none; border-spacing: 0;">
            <tr>
              <td style="width: 32px; vertical-align: top; padding-top: 2px;">
                <span style="font-size: 18px;">&#127770;</span>
              </td>
              <td>
                <p style="font-size: 15px; color: #374151; margin: 0; font-weight: 500;">Check for weather-appropriate items</p>
                <p style="font-size: 13px; color: #6b7280; margin: 4px 0 0 0;">Make sure you have the right layers for the week ahead</p>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr><td style="height: 8px;"></td></tr>
      <tr>
        <td style="padding: 12px 16px; background-color: #f9fafb; border-radius: 8px;">
          <table role="presentation" style="width: 100%; border: none; border-spacing: 0;">
            <tr>
              <td style="width: 32px; vertical-align: top; padding-top: 2px;">
                <span style="font-size: 18px;">&#10024;</span>
              </td>
              <td>
                <p style="font-size: 15px; color: #374151; margin: 0; font-weight: 500;">Get AI outfit suggestions</p>
                <p style="font-size: 13px; color: #6b7280; margin: 4px 0 0 0;">Let Kiko generate fresh outfit ideas from your wardrobe</p>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>

    <!-- CTA -->
    <table role="presentation" style="width: 100%; border: none; border-spacing: 0;">
      <tr>
        <td align="center" style="padding: 8px 0;">
          <a href="{{appUrl}}/suitcase/new?type=week" class="cta-button" style="display: inline-block; background: linear-gradient(135deg, #8B5CF6 0%, #A855F7 100%); color: #ffffff; font-size: 16px; font-weight: 600; padding: 16px 32px; border-radius: 12px; text-decoration: none;">
            Plan My Week
          </a>
        </td>
      </tr>
      <tr>
        <td align="center" style="padding: 8px 0;">
          <a href="{{appUrl}}/outfit" class="secondary-button" style="display: inline-block; background-color: #f3f4f6; color: #4b5563; font-size: 14px; font-weight: 500; padding: 12px 24px; border-radius: 8px; text-decoration: none;">
            Generate Random Outfit
          </a>
        </td>
      </tr>
    </table>

  </td>
</tr>
